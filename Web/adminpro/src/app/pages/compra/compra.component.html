
<div *ngIf="!registro"> 

<div class="btn-group" role="group" aria-label="Basic example" >
    <button type="button" class="btn btn-sm btn-secondary" (click)="nuevaCompra()"> <i class="fa far fa-file"></i>&nbsp;&nbsp; Nuevo</button> <!--routerLink="./ingresar"-->
</div>


<div class="row" >
    <div class="col-12">
        <div class="card mt-3">
            <div class="card-body">
              
                <div class="card-block table-border-style ">
    
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>                                                        
                                    <th class="d-none">ID</th>
                                    <th>PROVEEDOR</th>
                                    <th>FECHA</th>
                                    <th>NUMERO</th>
                                    <th>OPCIONES</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="d-none">prueba</td>
                                    <td>prueba</td>
                                    <td>prueba</td>
                                    <td>prueba</td>
                                    <td class="mt-2"> 
                                        <i class="fa fa-edit (alias)"></i> &nbsp;
                                        <i class="fa fa-times"></i> &nbsp;
                                    </td>
                                    
                                </tr>
                            </tbody>
                        </table>
                     </div>
                
                </div>
             

            </div>


                 <!-- INICIO FOOTER   -->
                                    
                 <div class="card-footer">
                                   
                    <hr style="margin-top: -40px;">
                    
                     <main role="main" class="container-fluid mt-4">     
                       
                          <div class="row text-center justify-content-center">   
                              <div class="col-12">
                             
                                <label for="" class="float-left">Mostando 1 al 10 de 10 registros</label>
                    
                                 <!--SELECT-->
                                  <select onchange="pageSize(3)"  class="mx-auto" id="cmbtamanioPaginaCurso"  style="height: 30px; margin-top: -5px;">
                                      <option >&nbsp;10&nbsp;</option>
                                      <option >&nbsp;30&nbsp;</option>
                                      <option >&nbsp;50&nbsp;</option>
                                  </select>
                            
                                   <div class=" float-right" style="margin-top: -10px;">
                             
                                     <nav aria-label="Pagination">
                                      <ul class="pagination justify-content-end">
                                       <li class="page-item" >
                                               <a class="page-link" >Anterior</a>
                                       </li>
                                        <li class="page-item"  >
                                            <a class="page-link" >1</a>
                                        </li>
                                        <li class="page-item" >
                                               <a class="page-link" >Siguiente</a>
                                       </li>  
                                      </ul>
                                    </nav>	  
                                                                  
                                 </div>
                                 
                              </div>
                          </div>
                       </main>
                                                    
                    </div>  
                    
                    <!-- FIN FOOTER   --> 
        </div>

    </div>
</div>

</div>



<div *ngIf="registro">


    <!-- INGRESAR - EDITAR-->


<div class="container-fluid " style="border:solid 1px #D9EDF7;">
  
    <div class="row " style="background: #D5D7D7 ; color:#5D7F9A;">

        <div class="col-12">
               <i class="fa fa-windows  float-left" style="margin-top: 20px;">&nbsp; &nbsp; </i> <h3 style="margin-top: 15px;"><strong>Registrar Compra</strong> </h3> 

            <div class="float-right" style="margin-top: -40px;">
                <i class="fa fa-arrow-left" (click)="cancelar()"></i>
            </div>

        </div>
        
       
    </div>

        <form [formGroup]="frmCompra"> 

            <div class="row pt-3">

                <div class="col-md-2">

                    <div class="form-group ">

                        <label for=""><strong>Numero</strong></label>

                        <input type="text" formControlName="numComprobante" placeholder="Numero" id="txtNumero"  class="form-control form-control-sm" required="required">


                    </div>

                </div>

                <div class="col-md-3">

                        <div class="form-group ">

                            <label for=""><strong>Proveedor</strong></label>

                            <input type="text" formControlName="proveedor" placeholder="Proveedor" id="txtProveedor"  class="form-control form-control-sm" required="required">


                        </div>

                </div>


                <div class="col-md-2">

                        <div class="form-group">

                            <label for="" ><strong>Fecha</strong></label>

                            <input type="date" formControlName="fechaPago" id="dtFechaCompra"  class="form-control form-control-sm" required="required">


                        </div>

                </div>

            </div>

            <hr>

            <form [formGroup]="DetalleCompra"> 


                <div class="row">

                    <div class="col-md-3">                                 

                        <div class="form-group">
                                    
                            <label><strong>Nombre</strong></label>
                            <div class="input-group">

                                <input readonly type="text" formControlName="nombreProducto" placeholder="Producto" class="form-control form-control-sm" aria-label="Recipient's username" aria-describedby="basic-addon2">
                                <div class="input-group-append">
                                <button class="btn btn-sm btn-outline-secondary " (click)="cargarModalProducto()"  type="button"><i class="fa fa-search"></i></button>
                                </div>
                                
                            </div>
                        </div>

                    </div>
            
            
                    <div class="col-md-2">                                 

                            <div class="form-group">

                                    <label for=""><strong>Valor compra:</strong></label>

                                    <input formControlName="precio" type="text" placeholder="Valor compra" class="form-control form-control-sm"  name="txtValorCompra"  id="txtValorCompra" >
                                                                    

                            </div>  

                    </div>

                    <div class="col-md-2">                                 

                            <div class="form-group">

                                    <label for=""><strong>Cantidad:</strong></label>

                                    <input type="text" formControlName="cantidad"  placeholder="Cantidad" class="form-control form-control-sm"  name="txtCantidad"  id="txtCantidad" >
                                                                    

                            </div>  

                    </div>

                    
                    <div class="col-md-2" hidden="hidden">                                 

                            <div class="form-group">

                                    <label for=""><strong>Id Producto:</strong></label>

                                    <input type="text" placeholder="Id" class="form-control form-control-sm" name="txtidProducto"  id="txtidProducto" >
                                                                    

                            </div>  

                    </div>

                    <div class="col-md-1 col-sm-3" style="margin-top: 30px;">

                        <button  #btnAgregarProductos (click)="agregarDetalle()"  class="btn btn-secondary btn-sm" >&nbsp; <i class="fa fa-plus mr-2"></i> </button>

                    </div>
                    

            </div>


            </form>

            <hr>

            <div class="row">

                <div class="col-12">


                        <div class="table-responsive" style="height: 280px;">

                                <table class="table  table-sm table-hover " id="tblDetalleCompras">
                                        <thead style="background: #242A33; color: #D9EDF7;">
                                        <tr class="text-center">
                                            <th scope="col">ID</th>
                                            <th scope="col">NOMBRE</th>
                                            <th scope="col">CANTIDAD</th>
                                            <th scope="col">PRECIO</th>
                                            <th scope="col">OPCIONES</th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                            <tr class="text-center" style="cursor: pointer;"  *ngFor='let detalle of service.detallesCompra' >
                            
                                                <td >1</td>
                                                <td >{{detalle.nombreProducto}} </td>
                                                <td >{{detalle.cantidad}} </td>
                                                <td >{{detalle.precio}} </td>
                                                <td>
                                                <i class="fa fa-edit (alias)"></i>&nbsp;
                                                <i class="fa fa-times"></i>
                                                </td>
                                                    
                                            </tr>

                                        </tbody>
                                    </table>
                        </div>

                </div>
            
            </div>

            <hr>

            <div class="row mb-3">

                <div class="container">

                    <div class="row">

                        <div class="col-6">

                            <div class="form-inline">

                                    <label class="mr-2"><strong>Total sin IGV: </strong></label> 
                                    <input formControlName="montoTotal" #txtTotalSinIgv  name="txtTotalSinIgv" type="text" class="form-control w-50 text-center" readonly>

                            </div>

                        </div>

                        <div class="col-md-4 col-sm-3">

                        </div>
                        <div class="col-md-2  col-sm-3" >

                            <button id="btnGuardarCompra" (click)="guardarCompra()"  class="float-right btn btn-secondary btn-sm form-control"><i class="fa fa-save mr-2"></i> Guardar</button>
                        </div>

                    </div>
                </div>

            </div>

        </form>

</div>


</div>

